<!DOCTYPE html>
<html lang="en">

<head>
  <title>Using rvest to scrape the CAZy website</title>
    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:creator" content="@chuckpr"/>
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.10.0/css/tachyons.min.css"/>

  <link rel="stylesheet" type="text/css" href="https://chuckpr.github.io/theme/css/article.css">
  <link rel="stylesheet" type="text/css" href="https://chuckpr.github.io/theme/css/notebook.css">
  <link rel="stylesheet" type="text/css" href="https://chuckpr.github.io/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="https://chuckpr.github.io/theme/css/site.css">
  <link rel="shortcut icon" type="image/x-icon" href="https://chuckpr.github.io/favicon.ico"/>
  <link rel="icon" type="image/x-icon" href="https://chuckpr.github.io/favicon.ico"/>
</head>

<body>
  <div class="mw7 avenir ml-auto mr-auto ph3 flex flex-column min-vh-100">
    <div id="header" class="flex flex-column">
<div class="pt5 pb2">
  <a href="https://chuckpr.github.io/" class="link dim f2-ns f3 fw4 blue tracked-tight bb-l bw1-ns lh-title b--moon-gray">
    A microbiologist with a data science problem
  </a>
</div>    </div>
    <div id="content" class="flex-auto mb5">
  <div class="flex flex-column">
    <div class="flex justify-between items-center article-title bb bw1 b--light-gray">
      <div>
        <div class="flex flex-column">
          <div>
            <p class="f3-ns f4 mv0 lh-title">
              Using rvest to scrape the CAZy website
            </p>
          </div>
          <div class="ml3">
            <p class="f6 ttc mb0 mt1 mid-gray">
              Sun 02 August 2015
            </p>
          </div>
        </div>
      </div>
      <div class="w-40">
        <div class="flex flex-wrap justify-end">
<div class="mv1 mr2 bg-light-green br3 pa2 grow">
  <a href="https://chuckpr.github.io/tag/r" class="link dark-pink underline-hover fw5">
      #R
  </a>
</div><div class="mv1 mr2 bg-light-green br3 pa2 grow">
  <a href="https://chuckpr.github.io/tag/genomics" class="link dark-pink underline-hover fw5">
      #genomics
  </a>
</div>        </div>
      </div>
    </div>
    <div class="ph3">
      <div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I have been looking for a nice excuse to play with <code>rvest</code> and since we're starting to work with "CAZYme" gene annotations in the Buckley lab, scraping the <a href="http://www.cazy.org/">CAZy</a> website seemed like a good fit. I'm starting simple and will build as I go. This post is just an example of producing a table of <a href="https://en.wikipedia.org/wiki/EC_number">EC</a> numbers and "clan" groupings of the CAZy glycoside hydrolase families.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We'll pull in all the libraries we need first.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span>%<span class="n">load_ext</span> <span class="n">rpy2.ipython</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>The rpy2.ipython extension is already loaded. To reload it, use:
  %reload_ext rpy2.ipython
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="nf">library</span><span class="p">(</span><span class="n">rvest</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">plyr</span><span class="p">);</span> <span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first thing I will do is read in the CAZy website <a href="http://www.cazy.org/Glycoside-Hydrolases.html">glycoside hydrolase</a> page.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">cazy</span> <span class="o">=</span> <span class="nf">html_session</span><span class="p">(</span><span class="s">&quot;http://www.cazy.org/Glycoside-Hydrolases.html&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>After inspecting the page, it's clear that the clan names are in table cells of the "thclan" <code>css</code> class and the corresponding families are in cells with the "clan" <code>css</code> class. We can use the <code>css</code> to quickly get the membership of each clan.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Try the <a href="http://selectorgadget.com/">SelectorGadget</a> for inspecting webpage elements. It's a great way to find <code>css</code> selectors for scraping.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>You can find a nice explanation of these <code>rvest</code> functions <a href="https://github.com/hadley/rvest">here</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">clans</span> <span class="o">=</span> <span class="n">cazy</span> <span class="o">%&gt;%</span> <span class="nf">html_nodes</span><span class="p">(</span><span class="s">&quot;.thclan&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">html_text</span><span class="p">()</span>
<span class="n">families.clan</span> <span class="o">=</span> <span class="n">cazy</span> <span class="o">%&gt;%</span> <span class="nf">html_nodes</span><span class="p">(</span><span class="s">&quot;.clan&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">html_text</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The following is just a quick function to parse the text that we just scraped into a dataframe. This took some trial and error but parsing the family string required the following steps:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ol>
<li>trim leading and trailing whitespace (<code>trimws</code>), </li>
<li>split on whitespace (<code>strsplit</code>), </li>
<li>and <code>unlist</code>.</li>
</ol>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This function takes an index and spits out a dataframe with two columns: one for the clan and one for the families.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">get_clan_df</span> <span class="o">=</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">data.frame</span><span class="p">(</span><span class="n">clan</span> <span class="o">=</span> <span class="n">clans[i]</span><span class="p">,</span> 
               <span class="n">family</span> <span class="o">=</span> <span class="n">families.clan[i]</span> <span class="o">%&gt;%</span> 
                   <span class="n">trimws</span> <span class="o">%&gt;%</span> <span class="c1"># remove leading and trailing whitespace</span>
                   <span class="nf">strsplit</span><span class="p">(</span><span class="s">&quot;\\s+&quot;</span><span class="p">,</span> <span class="n">perl</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="c1"># split families into </span>
                                                     <span class="c1"># individual elements</span>
                   <span class="n">unlist</span><span class="p">,</span> <span class="c1"># make it a vector</span>
               <span class="n">stringsAsFactors</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can loop through all the clans using <code>ldply</code> to build a single dataframe of all the clans.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">N</span> <span class="o">=</span> <span class="nf">length</span><span class="p">(</span><span class="n">clans</span><span class="p">)</span>
<span class="n">clan_df</span> <span class="o">=</span> <span class="nf">ldply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">N</span><span class="p">,</span> <span class="n">get_clan_df</span><span class="p">)</span>
<span class="n">clan_df</span> <span class="o">%&gt;%</span> <span class="n">head</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>  clan family
1 GH-A      1
2 GH-A      2
3 GH-A      5
4 GH-A     10
5 GH-A     17
6 GH-A     26
</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The EC information can be parsed similarly. Here the <code>css</code> selectors are "thec" for the EC numbers and "ec" for the families. For some reason two unrelated table cells earlier in the page have the "ec" class too so I had to omit those from the final families vector.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">ecs</span> <span class="o">=</span> <span class="n">cazy</span> <span class="o">%&gt;%</span> <span class="nf">html_nodes</span><span class="p">(</span><span class="s">&quot;.thec&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">html_text</span><span class="p">()</span>
<span class="n">families.ec</span> <span class="o">=</span> <span class="n">cazy</span> <span class="o">%&gt;%</span> <span class="nf">html_nodes</span><span class="p">(</span><span class="s">&quot;.ec&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">html_text</span><span class="p">()</span>
<span class="n">families.ec</span> <span class="o">=</span> <span class="n">families.ec[3</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">families.ec</span><span class="p">)</span><span class="n">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">get_ec_df</span> <span class="o">=</span> <span class="nf">function</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">data.frame</span><span class="p">(</span><span class="n">ec</span> <span class="o">=</span> <span class="n">ecs[i]</span><span class="p">,</span> 
               <span class="n">family</span> <span class="o">=</span> <span class="n">families.ec[i]</span> <span class="o">%&gt;%</span>
                   <span class="n">trimws</span> <span class="o">%&gt;%</span>
                   <span class="nf">strsplit</span><span class="p">(</span><span class="s">&quot;\\s+&quot;</span><span class="p">,</span> <span class="n">perl</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">)</span> <span class="o">%&gt;%</span>
                   <span class="n">unlist</span><span class="p">,</span>
               <span class="n">stringsAsFactors</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span>
<span class="n">N</span> <span class="o">=</span> <span class="nf">length</span><span class="p">(</span><span class="n">ecs</span><span class="p">)</span>
<span class="n">ec_df</span> <span class="o">=</span> <span class="nf">ldply</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="n">N</span><span class="p">,</span> <span class="n">get_ec_df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This information will be more useful when we're tallying the annotations in a real dataset, but, we can also do a quick analysis. It looks like the "GH-A" clan has the most glycoside hydrolase families and the most EC activities. Beyond that, the clans have similar numbers of families but vary with respect to number of EC activities. (Note how the "clan" column can be sorted using <code>magrittr</code> and <code>dplyr</code>. Graphs that aren't sensibly sorted are a huge pet peeve of mine :) . Also, I'm using <code>tidyr</code> to get the table in the proper orientation for plotting.)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span> <span class="o">-</span><span class="n">w</span> <span class="m">800</span> <span class="o">-</span><span class="n">h</span> <span class="m">350</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">ec_df</span> <span class="o">%&gt;%</span> 
    <span class="nf">left_join</span><span class="p">(</span><span class="n">clan_df</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">clan</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">summarize</span><span class="p">(</span><span class="n">ec.count</span> <span class="o">=</span> <span class="nf">length</span><span class="p">(</span><span class="nf">unique</span><span class="p">(</span><span class="n">ec</span><span class="p">)),</span> 
              <span class="n">family.count</span> <span class="o">=</span> <span class="nf">length</span><span class="p">(</span><span class="nf">unique</span><span class="p">(</span><span class="n">family</span><span class="p">)))</span> <span class="o">%&gt;%</span>
    <span class="nf">gather</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="o">-</span><span class="n">clan</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="p">{</span>
        <span class="n">ec.sort</span> <span class="o">=</span> <span class="nf">arrange</span><span class="p">(</span><span class="n">.,</span> <span class="nf">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="c1"># sort by count </span>
            <span class="nf">filter</span><span class="p">(</span><span class="n">key</span> <span class="o">==</span> <span class="s">&quot;ec.count&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
            <span class="nf">extract2</span><span class="p">(</span><span class="s">&quot;clan&quot;</span><span class="p">)</span> <span class="c1"># get a list of clans sorted by ec count</span>
        <span class="nf">mutate</span><span class="p">(</span><span class="n">.,</span> <span class="n">clan</span> <span class="o">=</span> <span class="nf">factor</span><span class="p">(</span><span class="n">clan</span><span class="p">,</span> <span class="n">levels</span> <span class="o">=</span> <span class="n">ec.sort</span><span class="p">))</span> <span class="c1"># make the clan </span>
                                                         <span class="c1"># a factor sorted </span>
                                                         <span class="c1"># by ec count</span>
    <span class="p">}</span>

<span class="n">d</span> <span class="o">%&gt;%</span> <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">head</span> <span class="o">%&gt;%</span> <span class="n">print</span>

<span class="n">p</span> <span class="o">=</span> <span class="nf">ggplot</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="nf">aes</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="n">clan</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">count</span><span class="p">,</span> <span class="n">fill</span> <span class="o">=</span> <span class="n">key</span><span class="p">))</span> <span class="o">+</span>
    <span class="nf">geom_bar</span><span class="p">(</span><span class="n">stat</span> <span class="o">=</span> <span class="s">&quot;identity&quot;</span><span class="p">,</span> <span class="n">position</span> <span class="o">=</span> <span class="s">&quot;dodge&quot;</span><span class="p">)</span> <span class="o">+</span>
    <span class="nf">theme</span><span class="p">(</span><span class="n">axis.text.x</span> <span class="o">=</span> <span class="nf">element_text</span><span class="p">(</span><span class="n">angle</span> <span class="o">=</span> <span class="m">45</span><span class="p">,</span> <span class="n">hjust</span> <span class="o">=</span> <span class="m">1</span><span class="p">))</span>

<span class="n">p</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>Source: local data frame [6 x 3]

  clan          key count
1 GH-A     ec.count    58
2 GH-H     ec.count    32
3 GH-A family.count    19
4 GH-B     ec.count    17
5 GH-D     ec.count    15
6 GH-J     ec.count    15
</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="https://chuckpr.github.io/notebooks/images/rvest1_21_1.png"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also look at the families with the most associated EC activities. Family 13 is has 30 EC activities associated with it! I found this somewhat baffling but it looks like Family 13 and other CAZy glycoside hydrolase families have been broken down into subfamilies that have more specific activites:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote><p><b>Dividing the large glycoside hydrolase family 13 into subfamilies: 
towards improved functional annotations of alpha-amylase-related proteins.</b>
Stam MR, Danchin EG, Rancurel C, Coutinho PM, Henrissat B.
Protein Eng Des Sel. 2006 Dec;19(12):555-62.</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="o">%%</span><span class="n">R</span> <span class="o">-</span><span class="n">h</span> <span class="m">350</span> <span class="o">-</span><span class="n">w</span> <span class="m">600</span>
<span class="n">ec_df</span> <span class="o">%&gt;%</span>
    <span class="nf">group_by</span><span class="p">(</span><span class="n">family</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">summarize</span><span class="p">(</span><span class="n">count</span> <span class="o">=</span> <span class="nf">n</span><span class="p">())</span> <span class="o">%&gt;%</span>
    <span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">count</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="p">{</span><span class="nf">print</span><span class="p">(</span><span class="nf">head</span><span class="p">(</span><span class="n">.)</span><span class="p">);</span> <span class="n">.}</span> <span class="o">%&gt;%</span>
    <span class="nf">extract2</span><span class="p">(</span><span class="s">&quot;count&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span>
    <span class="nf">hist</span><span class="p">(</span><span class="n">breaks</span> <span class="o">=</span> <span class="m">100</span><span class="p">,</span> <span class="n">main</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="n">xlab</span> <span class="o">=</span> <span class="s">&quot;# of EC activities&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>Source: local data frame [6 x 2]

  family count
1     13    30
2      1    25
3      5    23
4     16    14
5      3    14
6     32    14
</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="https://chuckpr.github.io/notebooks/images/rvest1_24_1.png"
>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This was so painless! It's so easy to use css selectors to get the information we're after.</p>

</div>
</div>
</div>
 


    </div>
<div id="disqus_thread" class="mt4">
</div>
<script>

  var disqus_config = function () {
    this.page.url = 'https://chuckpr.github.io/posts/rvest/';
    this.page.identifier = 'posts/rvest/';
  };

  (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://chuckpr-blog.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
  })();

</script>
<noscript>
  Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">
    comments powered by Disqus.
  </a>
</noscript>  </div>
    </div>
    <div id="footer" class="pv3 flex justify-between mb2">
      <div class="flex flex-column">
        <div class="mid-gray fw4 f6-ns f7 mb2">
          Copyright &copy; 2020 Chuck&nbsp;Pepe&#8209;Ranney
        </div>
        <div class="mid-gray" style="font-size: 0.65rem;">
          Powered&nbsp;by&nbsp;<a href="https://getpelican.com/" class="link dim
            mid-gray f6 fw6">Pelican</a>,
          Theme&nbsp;by&nbsp;<a href="https://github.com/chuckpr/simple-pelican-blog-theme"
            class="link dim mid-gray fw6">@chuckpr</a>
        </div>
      </div>
      <div class="flex justify-end w-50-ns w-30 mr4-ns mr0 ml2">
              <div class="w-10-ns w2 ml2 grow">
                <a href="https://github.com/chuckpr" class="light-purple dim link">
                  <div class="o-50 pa1-l">
<svg viewBox="0 0 24 24" fill="currentColor">
  <title>GitHub icon</title>
  <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
</svg>                  </div>
                </a>
              </div>
              <div class="w-10-ns w2 ml2 grow">
                <a href="https://www.linkedin.com/in/chuckpr/" class="light-purple dim link">
                  <div class="o-50 pa1-l">
<svg viewBox="0 0 24 24" fill="currentColor">
  <title>LinkedIn icon</title>
  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
</svg>                  </div>
                </a>
              </div>
              <div class="w-10-ns w2 ml2 grow">
                <a href="https://twitter.com/chuck_pr" class="light-purple dim link">
                  <div class="o-50 pa1-l">
<svg viewBox="0 0 24 24" fill="currentColor">
  <title>Twitter icon</title>
  <path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/>
</svg>                  </div>
                </a>
              </div>
      </div>
    </div>
  </div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

  console.log('Adding toggle buttons');
  var $toggleCodeButton = $('\
    <a class="toggle toggle-code" href="#0">\
      toggle code\
    </a>\
  ')

  var $toggleAllButton = $('\
    <div>\
      <a class="toggle toggle-all" href="#0">\
        show me\
      </a>\
    </div>\
  ')

  // This adds the buttons
  $(document).ready(function(){

    $cellToggleCode = $('.celltag_toggle_code')
    $cellToggleCode.find('.input').css('display', 'none');
    $toggleCodeButton.prependTo($cellToggleCode);

    $cellToggleAll = $('.celltag_toggle_all');
    $cellToggleAll.css('display', 'none');
    $toggleAllButton.insertBefore($cellToggleAll);

    $('.celltag_disappear').css('display', 'none');

  });

  // These add the toggle behavior for the buttons
  $(document).ready(function(){
    $('a.toggle-code').click(function(){
      $(this).next('.input').slideToggle();
    });
  })

  $(document).ready(function(){
    $('a.toggle-all').click(function(){
      $(this).parent().next('div').slideToggle();
    });
  })

</script></body>

</html>